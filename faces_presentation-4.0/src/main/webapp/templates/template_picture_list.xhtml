<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

	<ui:composition template="template.xhtml">
	
		<ui:define name="contentMenu">
				<h:outputText value="#{AlbumSession.initCurrentAlbum}" styleClass="noDisplay"></h:outputText>
				<h:outputText value="#{CollectionSession.initCurrentCollection}" styleClass="noDisplay"></h:outputText>
				<h:outputText value="#{HomePage.init}" styleClass="noDisplay" />
				<h:outputText rendered="#{(SessionBean.user == null) and (SessionBean.currentPage != 'RESOURCE') and (SessionBean.currentPage == 'ALBUM')}" value="#{HomePage.resolveAlbum}" />
				
				<h:outputLink id="lnkSort" styleClass="free_area0" value="?tab=SORTING" rendered="#{SessionBean.selectedMenu != 'SORTING' and HomePage.totalNumberOfItems != '0'}">
					<h:outputText value="#{lbl.sort}"></h:outputText>
				</h:outputLink>
				<h:outputText styleClass="free_area0" value="#{lbl.sort}" rendered="#{(SessionBean.selectedMenu == 'SORTING') and (HomePage.totalNumberOfItems != '0')}" />
				<h:outputText styleClass="seperator void" />
				<h:outputLink id="lnkOrganize" styleClass="free_area0" value="?tab=ORGANIZE" rendered="#{SessionBean.selectedMenu != 'ORGANIZE' and (AlbumSession.current.version.objectId != null or AlbumSession.active.version.objectId != null)}">
					<h:outputText value="#{lbl.organize}"></h:outputText>
				</h:outputLink>
				<h:outputText styleClass="free_area0" value="#{lbl.organize}" rendered="#{SessionBean.selectedMenu == 'ORGANIZE' and (AlbumSession.current.version.objectId != null or AlbumSession.active.version.objectId != null)}" />
				<h:outputText styleClass="seperator void" />
				<h:outputLink id="lnkExportAlbum" styleClass="free_area0" value="?tab=EXPORT" rendered="#{SessionBean.selectedMenu != 'EXPORT' and AlbumSession.current.version.objectId != null and (SessionBean.currentPage == 'RESOURCE') and (AlbumSession.current.state != 'WITHDRAWN') and (AlbumSession.current.size != '0') and (SessionBean.allowed)}">
					<h:outputText value="#{lbl.export}" />
				</h:outputLink>
				<h:outputText styleClass="free_area0" value="#{lbl.export}" rendered="#{SessionBean.selectedMenu == 'EXPORT' and AlbumSession.current.version.objectId != null and (SessionBean.currentPage != 'resource') and (AlbumSession.current.state != 'WITHDRAWN') and (AlbumSession.current.size != '0') and (SessionBean.allowed)}" />
				<h:outputLink styleClass="free_area0" id="lnkDownload" value="#{Navigation.confirmationUrl}/download" rendered="#{SessionBean.user != null and SessionBean.currentPage == 'home'}">
					<h:outputText value="#{lbl.download_collection}"></h:outputText>
				</h:outputLink>
				
				<h:outputText styleClass="seperator void" />
		</ui:define>
		
		<ui:define name="actionsMenu">
		
			<h:panelGroup layout="block" styleClass="free_area0 sub action" rendered="#{HomePage.totalNumberOfItems != '0' and SessionBean.selectedMenu == 'SORTING'}">
				<!-- SORTING content menu lower line starts here -->
				<h:outputText id="txtSortBy" value="Sorted by " styleClass="free_area0"/>
				<h:selectOneMenu id="selSortList1" value="#{SortingBean.selectedValue1}" styleClass="free_select">
					<f:selectItems value="#{SortingBean.sortcriterialist1}" />
				</h:selectOneMenu>
				<h:outputLink id="lnkSort1" styleClass="#{SortingBean.style1}" onclick="javascript:toggleorder(this); return false" value="#">&#160;</h:outputLink>
				<h:outputText styleClass="seperator void" />
				<h:selectOneMenu id="selSortList2" value="#{SortingBean.selectedValue2}" styleClass="free_select">
					<f:selectItems value="#{SortingBean.sortcriterialist2}" />
				</h:selectOneMenu>
				<h:outputLink id="lnkSort2" styleClass="#{SortingBean.style2}" onclick="javascript:toggleorder(this); return false" value="#">&#160;</h:outputLink>
				<h:outputText styleClass="seperator void" />
				<h:selectOneMenu id="selSortList3" value="#{SortingBean.selectedValue3}" styleClass="free_select">
					<f:selectItems value="#{SortingBean.sortcriterialist3}" />
				</h:selectOneMenu>
				<h:outputLink id="lnkSort3" styleClass="#{SortingBean.style3}" onclick="javascript:toggleorder(this); return false" value="#">&#160;</h:outputLink>
				<h:outputText styleClass="seperator void" />
				<h:outputLink value="#" onclick="javascript:callsorting(); return null;" styleClass="free_area1_p2 activeButton">
					<h:outputText value="Sort" />
				</h:outputLink>
				<!-- SORTING content menu lower line ends here -->
			</h:panelGroup>
		
			<h:panelGroup rendered="#{SessionBean.selectedMenu == 'ORGANIZE' and AlbumSession.current.version.objectId != null}">
				<!-- ORGANIZE content menu lower line FOR ALBUMS starts here -->
				<h:outputLink id="lnkEditAlbum" styleClass="free_area0" value="#{Navigation.albumUrl}/edit/#{AlbumSession.current.latestVersion.objectId}" rendered="#{AlbumSession.current.state == 'PENDING'}">
					<h:outputText value="#{lbl.album_edit}"></h:outputText>
				</h:outputLink>
				<h:outputText styleClass="seperator" rendered="#{AlbumSession.current.state == 'PENDING'}" />
				<h:outputLink id="lnkPublishAlbum" styleClass="free_area0" value="#{Navigation.confirmationUrl}/publish/#{AlbumSession.current.latestVersion.objectId}" rendered="#{(AlbumSession.current.state == 'PENDING') and (AlbumSession.current.size != '0')}">
					<h:outputText value="#{lbl.album_publish}"></h:outputText>
				</h:outputLink>
				<h:outputText styleClass="seperator" rendered="#{(AlbumSession.current.state == 'PENDING') and (AlbumSession.current.size != '0')}" />
				<h:outputLink id="lnkDeleteAlbum" styleClass="free_area0" value="#{Navigation.confirmationUrl}/delete/#{AlbumSession.current.latestVersion.objectId}" rendered="#{AlbumSession.current.state == 'PENDING'}">
					<h:outputText value="#{lbl.album_delete}"></h:outputText>
				</h:outputLink>
				<h:outputText styleClass="seperator" rendered="#{AlbumSession.current.state == 'PENDING'}" />
				<h:outputLink id="lnkWithdrawAlbum" styleClass="free_area0" value="#{Navigation.confirmationUrl}/withdraw/#{AlbumSession.current.latestVersion.objectId}" rendered="#{(AlbumSession.current.state == 'RELEASED') and (AlbumSession.current.owner.objectId == SessionBean.user.reference.objectId)}">
					<h:outputText value="#{lbl.album_withdraw}"></h:outputText>
				</h:outputLink>
				
				<h:outputLink id="lnkRemovePage" styleClass="free_area0" value="#{Navigation.albumInterfaceUrl}/#{AlbumSession.current.version.objectId}/REMOVEPAGE" rendered="#{AlbumSession.current.state == 'PENDING'}">
					<h:outputText value="#{lbl.batch_remove_page}"></h:outputText>
				</h:outputLink>
				<h:outputText styleClass="seperator" rendered="#{AlbumSession.current.state == 'PENDING'}" />
				<h:outputLink id="lnkRemoveAll" styleClass="free_area0" value="#{Navigation.albumInterfaceUrl}/#{AlbumSession.current.version.objectId}/REMOVEALL" rendered="#{AlbumSession.current.state == 'PENDING'}">
					<h:outputText value="#{lbl.batch_remove_all}"></h:outputText>
				</h:outputLink>
			</h:panelGroup>										
			<!-- ORGANIZE content menu lower line FOR ALBUMS ends here -->
		</ui:define>
		
		<ui:define name="actionsMenu2">
			<!-- ORGANIZE content menu lower line FOR PICTURES starts here -->
			<h:panelGroup rendered="#{SessionBean.selectedMenu == 'ORGANIZE'  and AlbumSession.current.version.objectId == null and AlbumSession.active.version.objectId != null}">
				<h:outputLink id="lnkAddPage" styleClass="free_area0" value="#{Navigation.albumInterfaceUrl}/#{AlbumSession.active.version.objectId}/ADDPAGE" rendered="true">
					<h:outputText value="#{lbl.batch_add_page}"></h:outputText>
				</h:outputLink>
				<h:outputText styleClass="seperator" rendered="true" />
				<h:outputLink id="lnkAddAll" styleClass="free_area0" value="#{Navigation.albumInterfaceUrl}/#{AlbumSession.active.version.objectId}/ADDALL" rendered="true">
					<h:outputText value="#{lbl.batch_add_all}"></h:outputText>
				</h:outputLink>
			</h:panelGroup>
			<!-- ORGANIZE content menu lower line FOR PICTURES ends here -->
		</ui:define>
		
		<ui:define name="actionsMenu3">
			<h:panelGroup rendered="#{SessionBean.selectedMenu == 'EXPORT' and AlbumSession.current.version.objectId != null and (SessionBean.currentPage != 'RESOURCE') and (AlbumSession.current.state != 'WITHDRAWN') and (AlbumSession.current.size != '0') and (SessionBean.allowed)}">
				<!-- EXPORT content menu lower line starts here -->
				<h:selectOneMenu id="selExportFormat" label="#{lbl.attributes}" value="#{AlbumSession.exportManager.parameters.exportFormatAsString}" valueChangeListener="#{AlbumSession.exportFormatListener}" immediate="true"  onclick="changeDisabled(this.value); return null;">
					<f:selectItem  itemLabel="#{lbl.attributes_in_xml}" itemValue="XML" />
					<f:selectItem itemLabel="#{lbl.attributes_in_csv}" itemValue="CSV"/>
					<f:selectItem itemLabel="#{lbl.pictures_and_xml}" itemValue="XML_AND_PICTURES" />
					<f:selectItem itemLabel="#{lbl.pictures_and_csv}" itemValue="CSV_AND_PICTURES"/>
					<f:selectItem itemLabel="#{lbl.pictures}" itemValue="PICTURES" />
				</h:selectOneMenu>
				
				<h:panelGroup layout="block" styleClass="free_checkbox">
					 <h:selectBooleanCheckbox id="selThumbnails" value="#{AlbumSession.exportManager.parameters.thumbnails}" valueChangeListener="#{AlbumSession.thumbnailsResolutionListener}" immediate="true"></h:selectBooleanCheckbox>
					<h:outputLabel value="#{lbl.thumbnails}" ></h:outputLabel>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="free_checkbox">
					 <h:selectBooleanCheckbox id="selWeb" value="#{AlbumSession.exportManager.parameters.web}" valueChangeListener="#{AlbumSession.webResolutionListener}" immediate="true"></h:selectBooleanCheckbox>
					<h:outputLabel value="#{lbl.web_resolution}" ></h:outputLabel>
				</h:panelGroup>
				
				<h:commandLink id="cmdDownload" action="#{AlbumSession.submitExportFormular}" value="#{lbl.download}" immediate="true" styleClass="free_area0_p8 activeButton"></h:commandLink>
				<!-- EXPORT content menu lower line ends here -->
			</h:panelGroup>
		</ui:define>
		
		<ui:define name="additionalSubheaders">
			<h:panelGroup layout="block" styleClass="subHeader" id="welcome" rendered="#{(SessionBean.user == null) and (SessionBean.currentPage == 'HOME')}">
				<!-- Welcome (not logged in) -->
				<h:outputText value="#{HomePage.totalNumberOfItems} #{msg.browse_not_logged_in}" />
			</h:panelGroup>
	
			<h:panelGroup layout="block" styleClass="subHeader" rendered="#{(SessionBean.query != '') and (SessionBean.query != null) and (SessionBean.currentPage == 'SEARCHRESULT')}">
				<a class="free_area0 xTiny_marginRExcl" href="#" onclick="$(this).parents('.subHeaderSection').find('.searchQuery').slideToggle('slow'); $(this).hide();"><h:outputText id="lblShowQuery" value="Show Query"/></a>								
				<h:outputLink id="lnkReviseSearcg" title="Revise the last Search"  value="#{Navigation.searchUrl}?action=revise">Revise Search</h:outputLink>
			</h:panelGroup>
			
			<h:panelGroup layout="block" styleClass="subHeader" rendered="#{(SessionBean.query != '') and (SessionBean.query != null) and (SessionBean.currentPage == 'SEARCHRESULT')}">
				<!-- Search Query -->
				<h:panelGroup layout="block" styleClass="full_area0 searchQuery" style="display: none;">
					<h:outputText value="#{msg.search_results_query_01}" ></h:outputText>
					<h:outputText value=" the whole Faces Collection for " rendered="#{SessionBean.user == null}" />
					<h:outputText value=" #{HomePage.collectionName} for " rendered="#{(SessionBean.user != null) and (HomePage.collectionName != null)}" />
					<h:outputText value=" #{lbl.collection_list_default} for " rendered="#{(SessionBean.user != null) and (HomePage.collectionName == null)}" />
					<h:outputText value="#{HomePage.queryDisplayed}" />
				</h:panelGroup>
			</h:panelGroup>
		</ui:define>

	</ui:composition>

</html>