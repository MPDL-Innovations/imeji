<ui:composition
	template="templates/template_site.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:imjc="http://java.sun.com/jsf/composite/components"
	xmlns:menu="http://java.sun.com/jsf/composite/components/menu"
	xmlns:dialog="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:html5="http://xmlns.jcp.org/jsf/passthrough">
	<ui:param name="headline" value="#{lbl.upload_in}..." />
	<ui:param name="title" value="#{lbl.upload}" />
	 
	 <ui:define name="init">
	 	<h:outputText value="#{UploadBean.init()}"/>
	 </ui:define>

	 
	 <ui:define name="mainContent">
	 	<ui:fragment rendered="#{empty UploadBean.collections and Auth.loggedIn}">
			<a href="mailto:#{Configuration.contactEmail}" class="imj_submitButton"><span class="fa fa-envelope-o"/>  #{lbl.contact_support_team}</a>
		</ui:fragment>
		
	 	<ui:fragment rendered="#{!Auth.loggedIn}">
	 		<ui:include src="./include/LoginFormular.xhtml" />
	 	</ui:fragment>
	 	<ui:fragment rendered="#{Auth.loggedIn}">
	 		<ui:fragment rendered="#{Auth.createCollection}">
				<form action="#{Navigation.createCollectionUrl}?showUpload=1">
		 			<input type="text" name="showUpload" value="1" style="display:none;"/>
					<button id="createCollection" class="imj_submitButton">
						#{lbl.new_collection}
					</button >
				</form>
				<span  style="padding: 5px 15px 5px 5px ">#{lbl.or_big}</span>
			</ui:fragment>
			<ui:fragment rendered="#{not empty UploadBean.collections}">
				<div class="selectMd">
					<button onclick="openDialog('selectColForUpdateDialog');return false;" class="imj_submitButton">#{lbl.select_collection}</button>
						
				</div>
			</ui:fragment>
			
	 	</ui:fragment>
	 	 <div  id="actions" class="imj_actionMenuArea">
		 	<div id="selectColForUpdateDialog" class="imj_modalDialogBox imj_moveItemsDialogBox imj_confirmationText" style="display:none;">
				<h:form id="selectCollectionForm">
					<div style="margin-bottom: 2em;">
						<span class="fa fa-globe fa-size-3" style="visibility: hidden">&#160;</span>
						<span>#{lbl.upload_in}</span>
						<a style="float:right" onclick="closeDialog('selectColForUpdateDialog');" class="imj_cancelButton">
							#{lbl.cancel}
						</a>
					</div>
					<div>
						<span class="fa fa-globe fa-size-3" style="visibility: hidden">&#160;</span>
						<h:inputText id="filterCollection" value="#{UploadBean.query}" html5:placeholder="#{lbl.filter}" >
							<f:ajax render="#{cc.attrs.parentId}:selectCollectionForm:list" event="keyup" listener="#{UploadBean.filterCollections}"/>
						</h:inputText>
					</div>
					<h:panelGroup layout="block" id="list">
						<ui:repeat var="col" value="#{UploadBean.collections}">
							<p>
								<a href="#{Navigation.collectionUrl}#{col.idString}?showUpload=1">
									<span class="fa fa-globe" style="#{col.status == 'RELEASED' ? '' : 'visibility: hidden'}"/>
									#{col.title}
								</a>
							</p>
						</ui:repeat>
					</h:panelGroup>
				</h:form>
			</div>
		</div>
	 </ui:define>
</ui:composition>
