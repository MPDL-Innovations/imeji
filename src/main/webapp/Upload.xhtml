<ui:composition
	template="templates/template_site.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:imjc="http://java.sun.com/jsf/composite/components"
	xmlns:menu="http://java.sun.com/jsf/composite/components/menu"
	xmlns:dialog="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:html5="http://xmlns.jcp.org/jsf/passthrough">
	<ui:param name="headline" value="#{lbl.upload_in}..." />
	 
	 <ui:define name="init">
	 	<h:outputText value="#{UploadBean.init()}"/>
	 </ui:define>
	 
	 <ui:define name="mainContent">
	 	
	 	<ui:fragment rendered="#{!Auth.loggedIn}">
	 		<ui:include src="./include/LoginFormular.xhtml" />
	 	</ui:fragment>
	 	<ui:fragment rendered="#{Auth.loggedIn}">
	 		<ui:fragment rendered="#{Auth.createCollection}">
				<form action="#{Navigation.createCollectionUrl}?showUpload=1">
		 			<input type="text" name="showUpload" value="1" style="display:none;"/>
					<button id="createCollection" class="imj_menuButton">
						#{lbl.new_collection}
					</button >
				</form>
				<span class="imj_menuButton">#{lbl.or_big}</span>
			</ui:fragment>
			<div class="selectMd">
				<button onclick="$('.selectMetadata-content').show(); return false;" class="imj_submitButton">#{lbl.select_collection}</button>
					<div class="selectMetadata-content">
						<h:form id="filterCollections">
							<h:inputText value="#{UploadBean.query}" html5:placeholder="#{lbl.filter}" >
								<f:ajax render=":list" event="keyup" listener="#{UploadBean.filterCollections}"/>
							</h:inputText>
						</h:form>
					<br/>
					 <h:panelGroup id="list">
						 <ui:fragment rendered="#{empty UploadBean.collections}">
						 #{lbl.upload_no_collection_found}
						 </ui:fragment>
						<ui:repeat var="col" value="#{UploadBean.collections}">
							<a href="#{Navigation.collectionUrl}#{col.idString}?showUpload=1">#{col.title}</a>
						</ui:repeat>
					</h:panelGroup>
				</div>
			</div>
	 	</ui:fragment>
	 </ui:define>
</ui:composition>
