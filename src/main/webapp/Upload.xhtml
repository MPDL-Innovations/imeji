<ui:composition
	template="templates/template_site.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:imjc="http://java.sun.com/jsf/composite/components"
	xmlns:menu="http://java.sun.com/jsf/composite/components/menu"
	xmlns:dialog="http://java.sun.com/jsf/composite/components/dialogs">

	<ui:param name="paginatorListSessionBean" value="#{ItemsBean}" />
	<ui:param name="headline" value=" " />
	<ui:param name="displayQuery" value="#{paginatorListSessionBean.simpleQuery != ''}" />
	<ui:param name="currentMainMenu" value="items" />
	<ui:param name="browseToAllItemsUrl" value="#{Navigation.browseUrl}?q=" />
	<ui:param name="title" value="#{lbl.upload}"/>

	 <ui:define name="mainContent">
	 	<ui:fragment rendered="#{!Auth.loggedIn}">
	 		<ui:include src="./include/LoginFormular.xhtml" />
	 	</ui:fragment>
	 	<ui:fragment rendered="#{Auth.loggedIn}">
			 <h:form id="uploadForm">
			 	<ui:fragment rendered="#{not empty UploadBean.collectionId}">
			 		<a href="#{UploadBean.collectionUrl}">#{lbl.collection_back_to_images}</a>
			 		<br/><br/>
			 	</ui:fragment>
			 	<ui:fragment rendered="#{not empty UploadBean.collections}">
			 	#{lbl.select_collection} 
				 	<h:selectOneMenu value="#{UploadBean.collectionId}">
				 		<f:selectItems var="col" value="#{UploadBean.collections}" itemValue="#{col.id.toString()}" itemLabel="#{col.title}"/>
				 		<f:ajax render="@form"/>
				 	</h:selectOneMenu>
			 	<br/><br/>
			 	</ui:fragment>
			 	<div id="uploadArea" class="itemsArea imj_dragOver" ondragover="this.style.opacity = .5 " ondragleave="this.style.opacity = 1">
			 		<div id="uploadTitle" class="uploadDragAndDropTitle">
						<span class="fa fa-upload"/> #{lbl.uploadFile}
					</div>
			 	</div>
		 		<h:commandButton id="create" action="#{UploadBean.create}" style="display: none" onclick="startLoader();">
		 			<f:ajax render="@form"/>
		 		</h:commandButton>
		 		<imjc:upload browseButtonId="uploadArea" collectionId="#{UploadBean.collectionId}" updateButtonId="uploadForm:create" dropElementId="uploadArea" uploadId="#{UploadBean.uploadId}"/>
		 	</h:form>
	 	</ui:fragment>
	 </ui:define>
	
</ui:composition>
