<ui:composition
	template="templates/template_site.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:imjc="http://java.sun.com/jsf/composite/components"
	xmlns:menu="http://java.sun.com/jsf/composite/components/menu"
	xmlns:dialog="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:html5="http://xmlns.jcp.org/jsf/passthrough">
	<ui:param name="headline" value="#{lbl.upload_in}..." />
	 
	 <ui:define name="init">
	 	<h:outputText value="#{UploadBean.init()}"/>
	 </ui:define>
	 
	 <ui:define name="actionsMenu">
		<ui:fragment rendered="#{empty UploadBean.collections and Auth.loggedIn}">
			<a href="mailto:#{ConfigurationBean.contactEmail}" class="imj_submitButton"><span class="fa fa-envelope-o"/>  #{lbl.contact_support_team}</a>
		</ui:fragment>
	</ui:define>
	 
	 <ui:define name="mainContent">
	 	
	 	<ui:fragment rendered="#{!Auth.loggedIn}">
	 		<ui:include src="./include/LoginFormular.xhtml" />
	 	</ui:fragment>
	 	<ui:fragment rendered="#{Auth.loggedIn}">
	 		<ui:fragment rendered="#{Auth.createCollection}">
				<form action="#{Navigation.createCollectionUrl}?showUpload=1">
		 			<input type="text" name="showUpload" value="1" style="display:none;"/>
					<button id="createCollection" class="imj_submitButton">
						#{lbl.new_collection}
					</button >
				</form>
				<span  style="padding: 5px 15px 5px 5px ">#{lbl.or_big}</span>
			</ui:fragment>
			<ui:fragment rendered="#{not empty UploadBean.collections}">
				<div class="selectMd">
					<button onclick="showAndFocus('filterCollections:filterCollection', 'selectMetadata-content');return false;" class="imj_submitButton">#{lbl.select_collection}</button>
						<div class="selectMetadata-content">
							<h:form id="filterCollections">
								<h:inputText id="filterCollection" value="#{UploadBean.query}" html5:placeholder="#{lbl.filter}" >
									<f:ajax render=":list" event="keyup" listener="#{UploadBean.filterCollections}"/>
								</h:inputText>
							</h:form>
						<br/>
						 <h:panelGroup id="list">
							 <ui:fragment rendered="#{empty UploadBean.collections}">
								 #{lbl.upload_no_collection_found}
							 </ui:fragment>
							<ui:repeat var="col" value="#{UploadBean.collections}">
								<a href="#{Navigation.collectionUrl}#{col.idString}?showUpload=1">#{col.title}</a>
							</ui:repeat>
						</h:panelGroup>
					</div>
				</div>
			</ui:fragment>
			
	 	</ui:fragment>
	 </ui:define>
</ui:composition>
