<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:dialog="http://java.sun.com/jsf/composite/components/dialogs">
	
	<div class="imj_metaMenuStandardSingleLine">
		
		<div class="imj_metaMenuItemsAlign">
			
			
			<!-- Username if logged in -->
			<ui:fragment rendered="#{Auth.loggedIn}">
				<h:outputLink id="txtAccountUserName" title="#{lbl.goto_user_profile}" styleClass="imj_metaMenuItem" value="#{Navigation.applicationUrl}user?email=#{Auth.sessionUser.email}">
					<h:outputText value="#{Auth.sessionUser.person.completeName}"/>
				</h:outputLink>
				<h:outputText styleClass="imj_metaMenuSeparator" value="&#160;"/>
			</ui:fragment>
			
			<!-- LogIn, LogOut -->
			<h:form id="loginForm">
				<ui:param name="redirectUrl" value="#{LoginBean.redirect==null?SuperBean.currentPage.urlEncoded:LoginBean.encodedRedirect}"/>
				<h:panelGroup rendered="#{!Auth.loggedIn}" styleClass="imj_metaMenuItem imj_loginFormHidden">
					<a href="#{Navigation.loginUrl}?redirect=#{redirectUrl}" id="lnkshowLogin" class="imj_metaMenuItem">#{lbl.login}</a>
				</h:panelGroup>
				<h:outputLink id="lnkLogout" title="#{lbl.logout}" value="#{Navigation.applicationUrl}?logout=1" styleClass="imj_metaMenuItem" rendered="#{Auth.loggedIn}">
					<h:outputText value="#{lbl.logout}"/>
				</h:outputLink>
				<dialog:passwordResetDialog dialogId="testDialog"/>
			</h:form>
						
			<!-- Register -->
			<h:form rendered="#{!Auth.loggedIn and Configuration.registrationEnabled}">
				<h:outputText styleClass="imj_metaMenuSeparator" value="&#160;"/>
				<h:outputLink value="#{Navigation.applicationUrl}register" title="#{lbl.register}" styleClass="imj_metaMenuItem">
					<h:outputText value="#{lbl.register}"/>
				</h:outputLink>
			</h:form>
			
			
			<!-- CSS Switcher -->
			<ui:fragment rendered="#{Configuration.alternativeCss != null and Configuration.alternativeCss != ''}">
				<h:outputText styleClass="imj_metaMenuSeparator" value="&#160;"/>	
				<h:form>
                    <h:commandLink value="&#160;" action="#{SessionBean.toggleCss()}" styleClass="imj_metaMenuItem fa fa-desktop" title="Style"/>
				</h:form>
			</ui:fragment>
					
			<!-- Language -->
			<ui:fragment rendered="#{InternationalizationBean.internationalizedLanguages.size() > 1}">
				<h:outputText styleClass="imj_metaMenuSeparator" value="&#160;"/>
				<h:form id="langForm">
					<h:selectOneMenu value="#{InternationalizationBean.currentLanguage}" onchange="document.getElementById('Header:langForm:submitLang').click();" valueChangeListener="#{InternationalizationBean.currentlanguageListener}" styleClass="imj_metaMenuItemSelect">
						<f:selectItems value="#{InternationalizationBean.internationalizedLanguages}"/>
					</h:selectOneMenu>
					<h:commandButton id="submitLang" action="#{InternationalizationBean.changeLanguage}" value="Change language" styleClass="imj_noDisplay">
						<f:ajax execute="@form" render="@none"/>
					</h:commandButton>
				</h:form>
			</ui:fragment>
			
			<!-- Help -->
			<ui:fragment rendered="#{Navigation.helpUrl != ''}">
				<h:outputText styleClass="imj_metaMenuSeparator" value="&#160;"/>
				<h:outputLink id="lnkHelp" styleClass="imj_metaMenuItem" title="#{lbl.goto_help}" value="#{Navigation.helpUrl}" target="_blank">
					<h:outputText value="#{lbl.help}"/>
				</h:outputLink>
			</ui:fragment>
		</div>
		
	</div>
	<!-- meta Menu ends here -->
</ui:composition>