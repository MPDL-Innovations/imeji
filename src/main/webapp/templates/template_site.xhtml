<!DOCTYPE HTML>
<f:view encoding="UTF-8" locale="#{InternationalizationBean.locale}" 
        xmlns:f="http://java.sun.com/jsf/core" 
        xmlns:h="http://java.sun.com/jsf/html" 
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:imjc="http://java.sun.com/jsf/composite/components">
    <f:loadBundle var="lbl" basename="labels"/>
    <f:loadBundle var="msg" basename="messages"/>
    <ui:param name="siteWrapperClass" value="#{Auth.sysAdmin ? 'imj_siteWrapper imj_isAdmin' : 'imj_siteWrapper'}" />

    <html xmlns="http://www.w3.org/1999/xhtml">
        <h:head>
            <ui:include src="component/header/html_head_default.xhtml"/>
            <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"/>
        </h:head>
        <h:body lang="#{InternationalizationBean.locale}"> 
       		#{Auth.init()}
        	<!-- NEW STYLE - TO BE ADDED TO CSS -->
             <style>
             		.imj_cancelButton, .imj_resetButton, .imj_submitButton { 
					    margin: 0 1em 0 0 !important;
					    display: inline !important;
					    padding: 5px 20px 5px 20px !important;
					}
					.imj_submitPanel .imj_cancelButton, .imj_submitPanel .imj_submitButton { 
					    margin: 0 1em 0 1em !important;
					} 
             		.imj_mainContentWrapper{
						overflow: inherit;
					}
		             .imj_mdInput, .imj_mdInputLabel{
						float:left;
						clear: both;
						width:100%;
					}
					textarea.imj_mdInput {
						height:2.5em;;
						resize: vertical;
					}
					.edit_selected_table_wrapper{
						width: 100%;
						overflow: auto;
						min-height: 50em;
					}
					.edit_selected_table{
						border-collapse: collapse;
						border: 5px solid #444444;
						table-layout: fixed; 
					}
					.edit_selected_table {
						border-collapse: collapse;
						border: 3px solid #444444;
						table-layout: fixed;
						margin: 2px;
					}
					.edit_selected_table textarea, .edit_selected_table input[type]:not(.combobox) {
					   	borders: 1px;
					   	margin-bottom: 0.5em;
					   	max-width: 70% !important;
					}
					.edit_selected_table td{
						vertical-align: middle;
						border: 1px solid #444444; 
						max-width: 12em;
						min-width: 12em;
						padding:0 1em;
						height: 4em;
					}
					.edit_selected_table_button{
						width: 100%;
						text-align: center;
						float: left;
					}
					.edit_selected_table_button label{
						text-align: left;
					}
					.edit_selected_table th{
						vertical-align: middle;
						margin:0;
						text-align: center;
						background-color: #444444;
						max-width: 15.6em;
						min-width: 15.6em;
						overflow-wrap: break-word;
					}
					.edit_selected_table_icon{
						margin-left: 0.5em;
						margin-right: 0.5em;
					}
					.editSelectedWrapper {
					 	position: fixed;
					  	width: 100%;
					  	top: 0;
					  	left: 0;
					  	bottom: 0;
					  	right: 0;
					  	background: #292929;
					  	z-index: 100;
					  	padding-top: 1em;
					  	overflow-x: hidden;
					}
					.editSelectedHeader{
						margin: 1em;
					}
					.loaderWrapper{
						position: fixed;
						top: 0;
					  	left: 0;
					  	bottom: 0;
					  	right: 0;
					  	width: 100%;
					  	background: #292929;
					  	z-index: 1000;
					  	height: 100%;
					  	width: 100%;
					  	position: fixed;
					  	overflow: hidden;
					  	opacity: 0.5;
					  	display: none;  
					}
					.uploadPanel{
					    position: fixed;
					    top: 50%;
					    left: 50%;
					    font-size: 2em;
					    z-index: 1001;
					    display: none;
					    width: 30em;
					    height: 5em;
					    margin-top: -9em;
					    margin-left: -15em;
					    background-color: #444444;
					    text-align: center;
					    vertical-align: middle;
					    padding-top: 3em;
					}
					.loader {
					   	position: fixed;
						top: 50%;
						left: 50%;
						z-index: 10001;
						width: 150px;
						height: 150px;
						margin: -75px 0 0 -75px;
						border: 16px solid #5E5E5E;
						border-radius: 50%;
						border-top: 16px solid #61AE2F;
						width: 120px;
						height: 120px;
						-webkit-animation: spin 2s linear infinite;
						animation: spin 2s linear infinite;
						display: none;
					}
					.show{
						display: block;
					}
					@keyframes spin {
					    0% { transform: rotate(0deg); }
					    100% { transform: rotate(360deg); }
					}
					.uploadDragAndDropTitle{
						width:100%;
						text-align: center;
						padding: 2em;
					}
					.imj_message{
						padding: 10px 20px 10px 20px;
				   		background-color: #6CAE2F; /* Red */
				    	color: white;
				    	margin-bottom: 5px;
				    	opacity: 1;
				    	transition: opacity 0.6s;
					}
					.imj_messageError{
				   		background-color: #D80000; /* Red */
					}
					.imj_messageAreaCloseBtn {	
					    margin-left: 15px;
					    color: white;
					    font-weight: bold;
					    float: right;
					    font-size: 22px;
					    line-height: 20px;
					    cursor: pointer;
					    transition: 0.3s;
					}
					
					.itemsArea{
						max-width : 96%;
					}
					.imj_actionMenuArea{
						max-height: 40px;
					}
					.imj_menuButton{
						font-size: 14px !important;
						margin: 5px 0 5px 5px;
						cursor: pointer;
						padding: 5px 10px 5px 10px !important;
					}
					.imj_menuButton:hover{
						color: white;
						background-color: #6CAE2F;
						border: none;
					}
					.imj_selectionInfoPanel{
						margin: 0;
					}
					.imj_tiledMediaList > .imj_listBody{
						margin: 0;
					}
					 .imj_menuBody span {
					    margin: 0.7em 0 !important;
					    font-size: 0.9em !important;
					}
					.imj_shareForm{
						padding:0;
					}
					#userShareButton{
						float:left;
					}
					#userShareButton input{
						margin-left: 0;
					}
					.imj_rightsTable{
						max-width: 80em;
					}
					.imj_metadataSet .imj_metadataValue{
						margin-left: 0;
					}
					.imj_menuButton{
						margin-left: 0;
						margin-right: 10px;
					}
					.collectionAbout{
						width: 80%;
						font-size: 1.2em;
						padding-bottom: 10px;
					}
					.collectionAboutTitle{
					    font-size: 150%;
					    font-weight: bold;
					    letter-spacing: 0.045em;
					    line-height: normal;
					    text-overflow: ellipsis;
					    overflow: hidden;
					}
					.collectionAboutAuthor{
						text-overflow: ellipsis;
						max-width: 80%;
						line-height: 1.4em;
						 font-size: 0.9em;
						white-space: nowrap;
  						overflow: hidden;
  						float:left;
					}
					.collectionAbout span{
						margin-right: 5px;
					}
					.collectionAboutHidden{
						width: 90%;
						display:none;
					}
					.imj_siteContentHeadline{
						padding-left: 20px !important;
					}
					.imj_adminPanel.imj_userConfig{
						width:initial !important;
					}
					.imj_administrationTiledList .imj_listBody{
						text-align: left;
					}
					.imj_moveItemsDialogBox{
						position: fixed;
						top: 5em;
						font-size: 1em;
					}
					.imj_shareDialogBox{
						position: fixed;
						font-size: 1em;
						max-width: 60%;
						min-width: 60%;
					}
					.uploadDialog{
						font-size: 1em;
						width: 60vh;
					}
					.uploadDialogHeadArea{
						height: 8%;
						margin-bottom: 1em;
						position: initial !important;
					}
					.uploadDialogDropArea{
						cursor: pointer;
					}
					.imj_dragOver{
						border: 2px dashed #6CAE2F;
					}
					small {
					    font-size: smaller;
					}
					sup {
					    vertical-align: super;
					    font-size: smaller;
					}
					.imj_mediaWithdrawn {
					    text-align: left;
					}
					.metadataSelector{
						text-align: left;
					}
					.selectMd {
						position: relative;
						display: inline-block;
					}
					.selectMd input {
						margin:  6px 8px;
						width: 80%;
					}
					.selectMd button {
						margin: 0;
						width:100%;
					}
					.selectMetadata-content {
						display: none;
						position: absolute;
						background-color: #444444;
						overflow: hidden;;
						box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
						z-index: 1000000;
						width:100%;
					}
					.selectMetadata-content a, .selectMetadata-content span {
						padding: 5px 8px;
						text-decoration: none;
						display: block;
					}
					.selectMd a:hover {
						background-color: #ddd
					}
					.imj_simpleSearchInput{
    					text-overflow: ellipsis;
					}
					.imj_menuSimpleSearch li{
    					text-overflow: ellipsis;
    					white-space: nowrap;
  						overflow: hidden;
					}
                </style>
            <!-- NEW SCIPT - TO BE ADDED TO JS -->
               
            <!-- default necessary scripts, because of use in body-load context -->
            <h:outputScript name="jquery/jquery-1.11.1.min.js"/>
            <h:outputScript name="jquery/ui/1.10.4/jquery-ui.min.js"/>
            <!-- optional header scripts, which must load before -->
            <ui:insert name="additonalHeaderScripts"/>          
            <!-- global page wrapper -->
            <h:panelGroup id="imeji_maintenance" layout="block" styleClass="imj_message imj_messageError" style="width:100%; padding:0.5em" rendered="#{Configuration.maintenanceMessage != ''}">
            	<h:outputText value="#{Configuration.maintenanceMessage}" escape="false"/>
            </h:panelGroup>
            <div class="#{siteWrapperClass}">
            	<div class="imj_allContentWrapper">
            	 	<ui:insert name="authorization"/>
	                <ui:insert name="init"/>
	                <ui:include src="component/header/header_default.xhtml"/>
	                
	               <!-- Messages -->
	                <h:panelGroup layout="block" id="imj_pageMessageArea">
		                <ui:repeat var="message" value="#{MessagesBean.messages}">
		                	 <div class="imj_message #{message.severity == 'ERROR 2' ? 'imj_messageError' : 'imj_messageSuccess'}">
		                		<span class="imj_messageAreaCloseBtn" onclick="this.parentElement.style.display='none';">x</span>
		                		#{message.detail}
		                	</div>
		                </ui:repeat>
	                </h:panelGroup>
	                 <!-- Search Query -->
	                <ui:insert name="searchQuery"/>
		           	
		           	<!-- headline -->   
	                 <div class="imj_siteContentHeadline">
	                    <h1>
	                        #{headline.toString().trim()} 
	                    </h1>
	                    <ui:insert name="collectionAbout"/>
	                    <span class="imj_siteContentStatus #{headline.toString().trim().length() == 0 ? 'imj_invisible' : ''}">
			                <imjc:iconStatus id="status" imejiResource="#{imejiResource}"/>
			            </span>
	                </div>
	                <!-- Actions Menu -->
	                <h:panelGroup layout="block" id="actionsMenuArea" class="imj_actionMenuArea">
	               		<ui:insert name="actionsMenu"/>
	                </h:panelGroup>
	       
	                <!-- content wrapper -->
	                <div class="imj_mainContentWrapper">
	                    <ui:insert name="mainContent"/>
	                </div>
	                
	               	<div class="loaderWrapper"/>
	               		<div class="loader"/>
	             	</div>
	             	
                <!-- footer -->
              <ui:include src="component/footer/footer_default.xhtml"/>
            </div>
            
            <!-- modal dialogs -->
            <div class="imj_modalDialogBackground">&#160;</div>
            <ui:insert name="modalDialogs_from_template"/>
            <ui:insert name="modalDialogs_from_site"/>
            <script type="text/javascript">var homeURL = '#{Navigation.applicationUrl}';</script>
            <h:outputScript name="js/default.js"/>

            <div id="additonalFooterScripts" class="imj_noDisplay">
                <ui:insert name="additonalFooterScripts"/> 
            </div>
            
        </h:body>
    </html>
</f:view>
