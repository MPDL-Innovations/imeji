<ui:composition template="../template_site.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:imjc="http://java.sun.com/jsf/composite/components"
                xmlns:menu="http://java.sun.com/jsf/composite/components/menu"
                xmlns:item="http://java.sun.com/jsf/composite/components/item"
                xmlns:facet="http://java.sun.com/jsf/composite/components/facet"
                xmlns:collection="http://java.sun.com/jsf/composite/components/collection">
	
	<ui:define name="actionsMenu">
		<menu:defaultActionMenu id="actionItems" rendered="#{currentMainMenu == 'items'}"/>
		<collection:actionMenu id="actionCollection" collectionBean="#{paginatorListSessionBean}" rendered="#{currentMainMenu == 'collection' and paginatorListSessionBean.collection.status.name() != 'WITHDRAWN'}" />
		<item:selectedActionMenu id="actionSelectedItems" itemsBean="#{paginatorListSessionBean}" rendered="#{not empty SessionBean.selected}" />
		<item:downloadMenu id="actionDownload" itemsBean="#{paginatorListSessionBean}" rendered="#{((currentMainMenu == 'collection' and paginatorListSessionBean.collection.status != 'WITHDRAWN') or (not currentMainMenu == 'collection' and not empty SessionBean.selected)) and paginatorListSessionBean.totalNumberOfElements > 0 }" />
	</ui:define>
	
    <!-- Main Content - Image tiled list - START -->
    <ui:define name="mainContent">
	
        <h:panelGroup layout="block" id="ajaxWrapper">
			<script>menuRightOffset();</script>
            <!-- Selection Info Panel -->
           
          
           
			<div id="itemsArea" class="itemsArea">
				
				<div id="facetsArea" class="imj_itemsAreaFacets">
	           		<facet:facetsSelector itemsBean="#{paginatorListSessionBean}" selector="#{FacetSelectorBean}"/>
	           	</div>
	        	<div  class="imj_itemsAreaContent">
	        		
	        		<a href="#" class="imj_openFilter  imj_listHeader" onclick="document.getElementById('facetsArea').style.width = '70%'; return false;">
	        			<span class="fa fa-filter"/> #{lbl.filter}
	        		</a>
	        		
	        	
	        	 	<item:filters id="selPanel" 
            			facetBean="#{paginatorListSessionBean}"  
            			numberOfElements="#{paginatorListSessionBean.totalNumberOfElements}" 
            			showSortMenu="true"
            			showStatusFilterMenu="#{currentMainMenu == 'collection' and paginatorListSessionBean.collection.status != 'PENDING'}"
            			showUserFilterMenu="#{not currentMainMenu=='items' or paginatorListSessionBean.collection==null}"/>
            		
					<item:thumbnailList  id="browseContent" picList="#{paginatorListSessionBean}" rendered="#{SessionBean.selectedBrowseListView == 'THUMBNAIL'}"/>
					<item:detailList id="browseContentDL" listBean="#{paginatorListSessionBean}" rendered="#{SessionBean.selectedBrowseListView == 'LIST'}"/>
				
				</div>
           		<ui:fragment rendered="#{paginatorListSessionBean.totalNumberOfElements == 0}">
           			<div  class="uploadDragAndDropTitle">
           				<span class=" fa fa-exclamation-triangle"/> #{msg.no_images_found}!
           			</div>
           		</ui:fragment>
           		
			</div>
			<!-- Page Browser GotoBox -->
            <imjc:rangePageBrowserGotobox paginatorBean="#{paginatorListSessionBean}" addJSFunctions="yes" showSwitchListView="true" rendered="#{paginatorListSessionBean.totalNumberOfElements != 0}"/>
        </h:panelGroup>
        
    </ui:define>
    
    <!-- Main Content - END -->
    <script>
        $('form input[type=text]').die('keydown').keydown(function (e) {
            if (e.keyCode == 13) {
                $('form\\:submitButton').click();
                return false;
            }
        });
    </script>

</ui:composition>