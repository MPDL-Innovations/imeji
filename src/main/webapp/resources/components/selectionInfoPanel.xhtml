<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:composite="http://java.sun.com/jsf/composite"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:menu="http://java.sun.com/jsf/composite/components/menu"
	  xmlns:imj="http://java.sun.com/jsf/composite/components">
	  
	<composite:interface>
		<composite:attribute name="facetBean" required="false"/>
		<composite:attribute name="showSortMenu" required="false" default="false"/>
	</composite:interface>
	
	<composite:implementation>
		<h:panelGroup layout="block" id="selectionInfoPanel" styleClass="imj_selectionInfoPanel">

			<h:panelGroup layout="block" styleClass="imj_overlayMenu imj_menuRight #{cc.attrs.menuClass.trim()}Item" rendered="#{cc.attrs.facetBean != null and cc.attrs.showSortMenu}">
				<div class="imj_menuHeader">
                    <span class="fa fa-sort">&#160;</span>
					<h:outputText id="txtSort" value="#{lbl.sorting}" styleClass="imj_headerEntry"/>
				</div>
				<div class="imj_menuBody">
					
					<h:form>
						<h:outputText value="#{lbl.sort_by}: " styleClass="imj_active"/>
						<h:commandLink id="lnkSortAsc" value="&#160;" styleClass="fa fa-sort-asc fa-pull-right fa-size-2" action="#{cc.attrs.facetBean.toggleSortOrder}" rendered="#{cc.attrs.facetBean.selectedSortOrder == 'ASCENDING'}" onclick="setContentLoadingStatus();">
							<f:ajax execute="@this" render=":ajaxWrapper :imj_pageMessageArea"/>
						</h:commandLink>
						<h:commandLink id="lnkSortDesc" value="&#160;" styleClass="fa fa-sort-desc fa-pull-right fa-size-2" action="#{cc.attrs.facetBean.toggleSortOrder}" rendered="#{cc.attrs.facetBean.selectedSortOrder != 'ASCENDING'}" onclick="setContentLoadingStatus();">
							<f:ajax execute="@this" render=":ajaxWrapper :imj_pageMessageArea"/>
						</h:commandLink>
						
						<ul class="imj_overlayMenuList">
							<ui:repeat var="sortItem" value="#{cc.attrs.facetBean.sortMenu}" varStatus="spos">
								<li class="imj_overlayMenuListItem">
									<h:commandLink value="#{sortItem.label}" action="#{cc.attrs.facetBean.changeSelectedSortCriterion(sortItem.value)}"  styleClass="#{(cc.attrs.facetBean.selectedSortCriterion == sortItem.value) ? 'imj_active' : ''}" onclick="setContentLoadingStatus();">
										<f:ajax execute="@this" render=":ajaxWrapper :imj_pageMessageArea"/>
									</h:commandLink>
								</li>
							</ui:repeat>
						</ul>
					</h:form>
				</div>
			</h:panelGroup>
			<ui:fragment rendered="#{cc.attrs.facetBean != null and cc.attrs.showSortMenu}">
				<menu:StatusFilterMenu rendered="#{!Configuration.privateModus}"/>
				<menu:UserFilterMenu/>
			</ui:fragment>
		</h:panelGroup>
	</composite:implementation>
</html>