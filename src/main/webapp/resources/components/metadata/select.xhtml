<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:md="http://java.sun.com/jsf/composite/components/metadata"
	xmlns:statement="http://java.sun.com/jsf/composite/components/statement"
	xmlns:html5="http://xmlns.jcp.org/jsf/passthrough">

<composite:interface>
	<composite:attribute name="menu" required="true" />
	<composite:attribute name="component" required="true" />
	<composite:attribute name="render" />
	<composite:attribute name="containerId" />
	<composite:attribute name="bean" />
	<composite:attribute name="submitAction" />
	<composite:attribute name="resetAction" />
		type="java.lang.Boolean" />
</composite:interface>

<composite:implementation>
	<style>
		.selectMd {
			position: relative;
			display: inline-block;
			width: 1
		}
		.selectMd input {
			margin:  6px 8px;
		}
		.selectMd button {
			margin: 0;
			width:100%;
		}
		.selectMetadata-content {
			display: none;
			position: absolute;
			background-color: #444444;
			overflow: auto;
			box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
			z-index: 1000000;
			width:100%;
		}
		.selectMetadata-content a {
			padding: 6px 8px;
			text-decoration: none;
			display: block;
		}
		.selectMd a:hover {
			background-color: #ddd
		}
		</style>
	<h:panelGroup id="selectMetadata" class="metadataSelector">
		<div class="selectMd">
			<button onclick="$('.selectMetadata-content').show(); return false;" class="imj_submitButton">#{lbl.select_metadata}</button>
			<div class="selectMetadata-content">
				<h:inputText value="#{cc.attrs.component.index}" html5:placeholder="#{lbl.search}..." autocomplete="off">
					<f:ajax event="keyup" render="#{cc.attrs.containerId}:statementList #{cc.attrs.containerId}:buttons"
						listener="#{cc.attrs.component.listener}" />
				</h:inputText>
				<h:panelGroup id="statementList">
					<ui:fragment rendered="#{not empty cc.attrs.component.index}">
						<a href="" onclick="openDialog('createStatementDialog'); $('.selectMetadata-content').hide(); return false;">
							#{cc.attrs.component.index}
						</a>
					</ui:fragment>
					<ui:repeat var="index" value="#{cc.attrs.component.searchForIndex(cc.attrs.menu)}">
						<h:commandLink value="#{index}" action="#{cc.attrs.bean[cc.attrs.submitAction]}" onclick="startLoader();">
							<f:setPropertyActionListener target="#{cc.attrs.component.index}" value="#{index}" />
							<f:ajax execute="@form" render="@form" />
						</h:commandLink>
					</ui:repeat>
					
				</h:panelGroup>
			</div>
		</div>
		<h:panelGroup id="buttons">
			<statement:createDialog id="dialog" component="#{cc.attrs.component}"
						bean="#{cc.attrs.bean}" submitAction="#{cc.attrs.submitAction}"
						containerId="#{cc.attrs.containerId}" />
		</h:panelGroup>
	</h:panelGroup>
</composite:implementation>
</html>