<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:imjc="http://java.sun.com/jsf/composite/components"
      xmlns:html5="http://xmlns.jcp.org/jsf/passthrough">

    <composite:interface>
        <composite:attribute name="formBean" required="true" />
    </composite:interface>

    <composite:implementation>
        <h:form id="statementForm">
            <div class="imj_headline">
                <br/>
            </div>
            <div class="imj_descriptionArea">
                <!-- Index -->
                <div class="imj_metadataSet">
                    <label class="imj_metadataLabel"> 
						#{lbl.name}<span class="imj_noDisplay">: </span>
                    </label>
                    <h:inputText id="inputStatementName" styleClass="imj_metadataValue"  value="#{cc.attrs.formBean.name}" html5:autofocus="true"/>
                </div>
                <div class="imj_metadataSet">
                    <label class="imj_metadataLabel"> 
						#{lbl.type}<span class="imj_noDisplay">: </span>
                    </label>
                    <h:selectOneMenu id="selStatementType" value="#{cc.attrs.formBean.type}">
						<f:selectItems value="#{cc.attrs.formBean.statementTypeMenu}"/>
						<f:ajax render="@form" execute="@form"/>
					</h:selectOneMenu>
                 </div>
                 <div class="imj_metadataSet">
                    <label class="imj_metadataLabel"> 
						#{lbl.namespace}<span class="imj_noDisplay">: </span>
                    </label>
                    <h:inputText id="inputStatementNamespace" styleClass="imj_metadataValue"  value="#{cc.attrs.formBean.namespace}" />
                 </div>
                 <ui:fragment rendered="#{cc.attrs.formBean.type == 'TEXT'}">
	                  <div class="imj_metadataSet">
	                    <label class="imj_metadataLabel"> 
							#{lbl.predefined_values}<span class="imj_noDisplay">: </span>
	                    </label>
	                    <div class="imj_metadataValue" >
		                    <ui:repeat var="value" value="#{cc.attrs.formBean.predefinedValues}" varStatus="varStatus">
		                    	<h:inputText id="inputPredefined" styleClass=""  value="#{value}" valueChangeListener="#{cc.attrs.formBean.predefinedValuesListener}">
		                    		<f:attribute name="position" value="#{varStatus.index}"/>
		                    	</h:inputText>
		                    	 <h:commandLink value="" action="#{cc.attrs.formBean.removePredefinedValue(varStatus.index)}" styleClass="fa fa-minus-square-o">
									<f:ajax execute="@form" render="@form" />
								</h:commandLink>
								<br/><br/>
			                </ui:repeat>
		                    <h:commandLink value="" action="#{cc.attrs.formBean.addPredefinedValue}" styleClass="fa fa-plus-square-o">
								<f:ajax execute="@form" render="@form" />
							</h:commandLink>
						</div>
	                 </div>
                 </ui:fragment>
                 <ui:fragment rendered="#{cc.attrs.formBean.type == 'GEOLOCATION' and not empty Configuration.googleMapsApi}">
	                  <div class="imj_metadataSet">
	                    <label class="imj_metadataLabel"> 
							#{lbl.use_google_maps}<span class="imj_noDisplay">: </span>
	                    </label>
	                    <div class="imj_metadataValue" >
		                	<h:selectBooleanCheckbox value="#{cc.attrs.formBean.useGoogleMapsAPI}" />
						</div>
	                 </div>
                 </ui:fragment>
                  <ui:fragment rendered="#{cc.attrs.formBean.type == 'PERSON' and not empty Configuration.coneAuthors}">
	                  <div class="imj_metadataSet">
	                    <label class="imj_metadataLabel"> 
							#{lbl.use_max_planck_authors}<span class="imj_noDisplay">: </span>
	                    </label>
	                    <div class="imj_metadataValue" >
		                	<h:selectBooleanCheckbox value="#{cc.attrs.formBean.useMaxPlanckAuthors}" />
						</div>
	                 </div>
                 </ui:fragment>
                <div id="submitButtonPanel" class="imj_submitPanel">
                    <h:outputLink value="#{HistorySession.previousPage.completeUrlWithHistory}" styleClass="imj_cancelButton">
                        <h:outputText value="#{lbl.cancel}"/>
                    </h:outputLink>
                    <h:commandButton id="btnCreateStatement" action="#{cc.attrs.formBean.save()}" value="#{lbl.save}" styleClass="imj_submitButton"/>
                </div>
            </div>
        </h:form>
    </composite:implementation>
</html>