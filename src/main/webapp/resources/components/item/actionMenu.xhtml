<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:dialog="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:item="http://java.sun.com/jsf/composite/components/item">
	
	<composite:interface>		
		<composite:attribute name="itemBean"/>								
	</composite:interface>
	
	<composite:implementation>
			<h:form>
				<h:commandLink rendered="#{Auth.update}" action="#{cc.attrs.itemBean.showEditor}" styleClass="imj_menuButton imj_overlayMenu" onclick=" window.location.hash = '#itemMetadata';">
					 <span class="fa fa-pencil"/> <span>#{lbl.edit}</span>
					 <f:ajax render=":metadata"/>
				</h:commandLink>
				<h:outputLink value="#" onclick="openDialog('deleteItem');" styleClass="imj_menuButton imj_overlayMenu"  rendered="#{Auth.delete and WorkflowBean.delete(itemBean.item)}">
					<span class="fa fa-trash"/> <span>#{lbl.delete}</span>
				</h:outputLink>
				<h:outputLink value="#" onclick="openDialog('withdrawItem');" styleClass="imj_menuButton imj_overlayMenu"  rendered="#{Auth.delete and WorkflowBean.withdraw(itemBean.item)}">
					<span class="fa fa-ban"/> <span>#{lbl.withdraw}</span>
				</h:outputLink>
			</h:form>
		<a href="#{Navigation.applicationUrl}exportServlet?format=file&amp;id=#{cc.attrs.itemBean.item.id}" class="imj_menuButton imj_overlayMenu" target="_blank">
			<span class="fa fa-download"/> <span>#{lbl.download}</span>
		</a>
		<ui:fragment rendered="#{Auth.delete and WorkflowBean.delete(cc.attrs.itemBean.item)}">
			<h:form>
				<h:commandLink id="moveItems" styleClass="imj_menuButton imj_overlayMenu" action="#{MoveItemsBean.searchCollectionsForMove(cc.attrs.itemBean.item.collection.toString())}" onclick="openDialog('moveItemsDialog');">
					<span class="fa fa-hand-o-right"/> <span>#{lbl.move}..</span>
					<f:ajax render=":actionItem:moveItemsComponent:moveItemsForm"/>
				</h:commandLink>
			</h:form>
		</ui:fragment>
		<item:move id="moveItemsComponent" itemId="#{cc.attrs.itemBean.item.id.toString()}" colId="#{cc.attrs.itemBean.item.collection.toString()}" parentId=":actionItem:moveItemsComponent" hasLicense="#{not empty cc.attrs.itemBean.image.licenses}"/>
		<dialog:confirmationDialog submitAction="delete" bean="#{itemBean}" confirmationText="#{msg.confirmation_delete_item}?" submitLabel="#{lbl.delete}" dialogId="deleteItem" />
		<dialog:confirmationReasonedDialog submitAction="withdraw" bean="#{itemBean}" confirmationText="#{msg.confirmation_withdraw_item}?" submitLabel="#{lbl.withdraw}" dialogId="withdrawItem"/>	
	</composite:implementation>
</html>
