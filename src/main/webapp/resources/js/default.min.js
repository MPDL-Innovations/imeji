function endsWith(str,suffix){return str.indexOf(suffix,str.length-suffix.length)!==-1;}function formatNumber(n){return n.replace(",",".").replace(" ","");}function isNumber(n){n=formatNumber(n);return !isNaN(parseFloat(n))&&isFinite(n);}function sortOptionsByText(){var selectElement,optionElements,options;selectElement=jQuery('select[data-sort="sort"]');if(selectElement){optionElements=jQuery(selectElement.find("option"));options=jQuery.makeArray(optionElements).sort(function(a,b){return(a.innerHTML>b.innerHTML)?1:-1;});selectElement.html(options);}}function loadContent(loadURL,target,callback){$.ajax({type:"GET",url:loadURL,cache:false,success:function(returndata){if(target){$(target).html(returndata);}if(callback){setTimeout(callback,15,target,returndata);}}});}function validateInputNumber(input){input.value=formatNumber(input.value);if(!isNumber(input.value)){input.value="";}}function parseId(classname,classRef){var ptn;if(classRef){ptn=new RegExp(classRef+"(\\S*)");}else{ptn=/id_(\S*)/;}ptn.exec(classname);if(RegExp.$1!==""){return RegExp.$1;}else{return false;}}function checkForChilds(id){var childs,curId;childs=jQuery(".parent_"+id);if(childs.length>0){childs.each(function(i,obj){jQuery(this).addClass("imj_highlightDependencies");curId=parseId(jQuery(this).attr("class"));if(curId){checkForChilds(curId);}});}}function highlight(id,alter){var items;items=(alter)?$("."+alter+id):$(".id_"+id);items.addClass("imj_highlightDependencies");}function reset_highlight(){$(".imj_highlightDependencies").removeClass("imj_highlightDependencies");}function highlighter(){var areas=$(".highlight_area");areas.off("mouseover");areas.off("mouseout");areas.mouseover(function(){var itemId=parseId(jQuery(this).attr("class"));var prntId=parseId(jQuery(this).attr("class"),"parent_");highlight(itemId);checkForChilds(itemId);if(prntId){highlight(prntId,"id_");}}).mouseout(function(){reset_highlight();});}function dragAndDrop(){jQuery(function(){var dragged;jQuery(".draggable").draggable({zIndex:100,opacity:0.1,cursor:"move",axis:"y",revert:"invalid"});jQuery(".draggable").on("dragstart",function(event,ui){dragged=jQuery(this).attr("id")+"DragButton";hide_non_droppable_area(parseId(jQuery(this).attr("class")));});jQuery(".draggable").on("dragstop",function(event,ui){show_all_droppable_elements();});jQuery(".dropMetadata").droppable({hoverClass:"drop-hover",accept:".draggable",activeClass:"dropMetadataActive",greedy:true,drop:function(event,ui){setOpacity();var id=jQuery(this).attr("id")+"Button";document.getElementById(dragged).click();document.getElementById(id).click();}});jQuery(".dropChild").droppable({hoverClass:"drop-hover",accept:".draggable",activeClass:"dropChildActive",drop:function(event,ui){setOpacity();var id=jQuery(this).attr("id").replace("metadata","dropChildButton");document.getElementById(dragged).click();document.getElementById(id).click();}});});}function unSelectUnique(index){var i=0;while(document.getElementById("profileForm:profile:"+i+":uniqueSelect")!=null){if(index!==i){document.getElementById("profileForm:profile:"+i+":uniqueSelect").checked=false;document.getElementById("profileForm:profile:"+i+":radioDescription:0").checked=false;}else{if(document.getElementById("profileForm:profile:"+i+":uniqueSelect").checked){document.getElementById("profileForm:profile:"+i+":uniqueSelect").checked=false;document.getElementById("profileForm:profile:"+i+":radioDescription:0").checked=false;}else{document.getElementById("profileForm:profile:"+i+":uniqueSelect").checked=true;document.getElementById("profileForm:profile:"+i+":radioDescription:0").checked=true;}}i++;}}function write_options(select,value,optionsString){select.innerHTML="";var options=optionsString.split("|");for(var i=0;i<options.length;i++){var option=document.createElement("option");option.value=options[i].split(",")[0];option.text=options[i].split(",")[1];if(option.value!==""){select.appendChild(option);}if(option.value===value){option.selected="selected";}}select.value=value;}function setOpacity(){document.getElementById("profileForm:ajaxArea").style.opacity="0.2";}function show_all_droppable_elements(){$(".statement_area").css("visibility","visible");}function hide_non_droppable_area(statementId){var area=$(".statement_area_id_"+statementId);area.each(function(){jQuery(this).css("visibility","hidden");hide_childs(statementId);});}function hide_childs(id){var childs=jQuery(".statement_area_parent_"+id);childs.css("visibility","hidden");childs.each(function(){var childId=parseId(jQuery(this).attr("class"));hide_childs(childId);});}function submitPanel(panelId,message){var panel=document.getElementById(panelId);if(panel!=null){panel.innerHTML='<h2><span class="free_area0_p8 xTiny_marginLExcl">'+message+"</span></h2>";}}function openDialog(id){var dialog=$(document.getElementById(id));dialog.css("left",Math.max(0,Math.round(($(window).width()-$(dialog).outerWidth())/2)+$(window).scrollLeft())+"px");dialog.show();$(".imj_modalDialogBackground").show();}function closeDialog(id){var dialog=$(document.getElementById(id));$(".imj_modalDialogBackground").hide();dialog.hide();}$(window).resize(function(evt){var dialog=$(".imj_modalDialogBox:visible");if(dialog.length>0){dialog.css("left",Math.max(0,Math.round(($(window).width()-$(dialog).outerWidth())/2)+$(window).scrollLeft())+"px");}});var swcObject={};function initSWC(swcdomelement){var shark,canvas,placeholder;swcObject.data=$(swcdomelement).text();swcObject.json=swc_parser(swcObject.data);canvas=document.createElement("canvas");if(window.WebGLRenderingContext&&(canvas.getContext("webgl")||canvas.getContext("experimental-webgl"))){placeholder=$("*[id*="+swcObject.placeholderID+"]");placeholder.get(0).style.display="none";shark=new SharkViewer({swc:swcObject.json,dom_element:swcObject.displayID,WIDTH:swcObject.width,HEIGHT:swcObject.height,center_node:-1,show_stats:false,screenshot:false});shark.init();shark.animate();}else{document.getElementById(swcObject.failedMsgID).style.display="block";}}function loadSWC(src,element_name){var source,swc;source=$(src);swcObject={domSource:src,dataURL:source.data("swc-source")||undefined,serviceURL:source.data("swc-service")||undefined,elementID:element_name,displayID:(source.data("target-id")[0]==="#")?source.data("target-id").substring(1):source.data("target-id"),width:source.data("target-width"),height:source.data("target-height"),placeholderID:(source.data("placeholder-id")[0]==="#")?source.data("placeholder-id").substring(1):source.data("placeholder-id"),failedMsgID:(source.data("failed-msg-id")[0]==="#")?source.data("failed-msg-id").substring(1):source.data("failed-msg-id")};initSWC("#"+swcObject.elementID);}function handleDisableButton(data){if(data.source.type!=="submit"){return;}switch(data.status){case"begin":data.source.disabled=true;break;case"complete":data.source.disabled=false;break;}}if(typeof jsf!=="undefined"){jsf.ajax.addOnEvent(function(data){if(data.status==="success"){fixViewState(data.responseXML);}handleDisableButton(data);});}function fixViewState(responseXML){var viewState=getViewState(responseXML);if(viewState){for(var i=0;i<document.forms.length;i++){var form=document.forms[i];if(form.method.toLowerCase()==="post"){if(!hasViewState(form)){createViewState(form,viewState);}}else{removeViewState(form);}}}}function getViewState(responseXML){var updates=responseXML.getElementsByTagName("update");for(var i=0;i<updates.length;i++){var update=updates[i];if(update.getAttribute("id").match(/^([\w]+:)?javax\.faces\.ViewState(:[0-9]+)?$/)){return update.firstChild.nodeValue;}}return null;}function hasViewState(form){for(var i=0;i<form.elements.length;i++){if(form.elements[i].name=="javax.faces.ViewState"){return true;}}return false;}function createViewState(form,viewState){var hidden;try{hidden=document.createElement("<input name='javax.faces.ViewState'>");}catch(e){hidden=document.createElement("input");hidden.setAttribute("name","javax.faces.ViewState");}hidden.setAttribute("type","hidden");hidden.setAttribute("value",viewState);hidden.setAttribute("autocomplete","off");form.appendChild(hidden);}function removeViewState(form){for(var i=0;i<form.elements.length;i++){var element=form.elements[i];if(element.name=="javax.faces.ViewState"){element.parentNode.removeChild(element);}}}function updateCustomSelectbox(selectbox){var customSelectbox,select,val,textContainer,icon,textWidth;select=selectbox;customSelectbox=select.parents(".imj_customSelectbox");customSelectbox.width(select.width());text=customSelectbox.find(".imj_selectionText");icon=customSelectbox.find(".fa.fa-angle-down");val=select.val();select.find("option").each(function(i,opt){if($(opt).val()==val){val=$(opt).text();$(opt).parent().attr("title",val);}});text.text(val);textWidth=select.width()-icon.width()-Math.round(Number(icon.css("margin-left").replace("px","")));text.width(textWidth);}function customSelectbox(obj){if(obj){}else{$(".imj_customSelectbox select").each(function(i){updateCustomSelectbox($(this));});}}$(function(){$(".imj_overlayMenu").each(function(i,obj){var menuHeaderWidth=$(this).find(".imj_menuHeader").width();var menuBody=$(this).find(".imj_menuBody");if(menuHeaderWidth>menuBody.width()){menuBody.width(menuHeaderWidth);}});});jQuery(document).ready(function(){customSelectbox();highlighter();});var selectedSearch=1;var albumsUrl,collectionsUrl,browseUrl;function initSimpleSearch(albumsUrlValue,collectionsUrlValue,browseUrlValue){albumsUrl=albumsUrlValue;collectionsUrl=collectionsUrlValue;browseUrl=browseUrlValue;}function submitSimpleSearch(){if($(".imj_simpleSearchInput").val()!=""){if(selectedSearch==1){goToSearch("items");}if(selectedSearch==2){goToSearch("collections");}if(selectedSearch==3){goToSearch("albums");}}return false;}function goToSearch(type){if(type=="items"){window.open(browseUrl+"?q="+$(".imj_simpleSearchInput").val(),"_self");}if(type=="collections"){window.open(collectionsUrl+"?q="+$(".imj_simpleSearchInput").val(),"_self");}if(type=="albums"){window.open(albumsUrl+"?q="+$(".imj_simpleSearchInput").val(),"_self");}}$(".imj_simpleSearchInput").focusin(function(){if($(this).val()!=""){$(".imj_menuSimpleSearch").show();selectedSearch=1;highlightSearch();}}).keydown(function(event){if($(this).val()!=""){$(".imj_menuSimpleSearch").show();}if(event.which==40){incrementSelectedSearch();highlightSearch();}if(event.which==38){decrementSelectedSearch();highlightSearch();}}).focusout(function(){});$(".imj_simpleSearch").focusout(function(){$(".imj_menuSimpleSearch").delay(200).hide(0);});$("ul.imj_overlayMenuList li").mouseover(function(){$(".defaultSearchType").removeClass("hovered");});function highlightSearch(){$("ul.imj_overlayMenuList li").removeClass("hovered");if(selectedSearch==1){$("ul.imj_overlayMenuList li:nth-child(1)").addClass("hovered");}if(selectedSearch==2){$("ul.imj_overlayMenuList li:nth-child(2)").addClass("hovered");}if(selectedSearch==3){$("ul.imj_overlayMenuList li:nth-child(3)").addClass("hovered");}}function incrementSelectedSearch(){if(selectedSearch<3){selectedSearch=selectedSearch+1;}}function decrementSelectedSearch(){if(selectedSearch>1){selectedSearch=selectedSearch-1;}}function getSearchSelectedName(){if(selectedSearch==1){return"items";}if(selectedSearch==2){return"collections";}if(selectedSearch==3){return"albums";}}