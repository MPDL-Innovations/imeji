<ui:composition
	template="templates/sub_template/template_image_tiledlist.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:imjc="http://java.sun.com/jsf/composite/components"
	xmlns:dialog="http://java.sun.com/jsf/composite/components/dialogs"
	xmlns:menu="http://java.sun.com/jsf/composite/components/menu"
	xmlns:col="http://java.sun.com/jsf/composite/components/collection">

	<ui:param name="paginatorListSessionBean" value="#{CollectionItemsBean}" />
	<ui:param name="headline" value="" />
	<ui:param name="title" value="#{not empty CollectionItemsBean.query or not empty CollectionItemsBean.facetQueryString ? lbl.search_results : CollectionItemsBean.collection.title}" />
	<ui:param name="currentMainMenu" value="collection" />
	<ui:param name="browseToAllItemsUrl" value="#{Navigation.collectionUrl}#{CollectionItemsBean.id}?q=" />
	<ui:param name="imejiResource" value="#{CollectionItemsBean.collection}" />
	<ui:param name="backLink1" value="#{not empty CollectionItemsBean.query or not empty CollectionItemsBean.facetQueryString ? browseToAllItemsUrl : ''}"/>
	<ui:param name="backlinkTitle1" value="#{CollectionItemsBean.collection.title}"/>

	 <ui:define name="authorization">
		 #{Auth.init(CollectionItemsBean.collection)}
	 </ui:define>
	 
	  <ui:define name="collectionAbout">
		<div class="collectionAbout">
			<div class="collectionAboutTitle">
				<ui:fragment rendered="#{not empty backLink1   and not empty backlinkTitle1}">
				     <a href="#{backLink1}" title="#{backlinkTitle1}">#{backlinkTitle1}</a><span> > </span>
				</ui:fragment>
				<span>#{title}</span>
			</div>
			<span class="collectionAboutAuthor">#{lbl.by} #{CollectionItemsBean.authorsShort}</span>
			<a href="" onclick="return false;">
				<span class="moreCollection" style="font-size:0.85em;" onclick="$('.collectionAboutHidden').slideDown(500);$('.lessCollection').show(); $(this).hide();">
					<span class="fa fa-caret-down" /> 
					#{lbl.more}
				</span>
				<span class="lessCollection" style="display:none;font-size:0.85em;" onclick="$('.collectionAboutHidden').slideUp(500);$('.moreCollection').show(); $(this).hide();">
					<span class="fa fa-caret-up" /> 
					#{lbl.less}
				</span>
			</a>
			<ui:fragment rendered="#{CollectionItemsBean.collection.status == 'WITHDRAWN'}">
				<div class="imj_infodataSet imj_mediaWithdrawn">
					#{lbl.withdrawn}<br/>
					<h:outputText value="#{CollectionItemsBean.collection.discardComment}" escape="false"/>
				</div>
			</ui:fragment>
		</div>
		
		<div class="collectionAboutHidden">
			<col:details bean="#{CollectionItemsBean}" applicationUrl="#{Navigation.applicationUrl}" lbl="#{lbl}"/>
		</div>
	 </ui:define>

	<ui:define name="searchQuery">
		<imjc:searchQueryDisplayArea searchBean="#{paginatorListSessionBean}"
			navBean="#{Navigation}"
			rendered="#{paginatorListSessionBean.simpleQuery != ''  or !paginatorListSessionBean.facetQuery.isEmpty()}"
			label="#{lbl.search_for} #{HistorySession.currentPage.getInternationalizedName(InternationalizationBean.locale)}" />
	</ui:define>
	
	<ui:define name="additonalFooterScripts">
		<script>
			jQuery(document).ready(function() {
				if(#{CollectionItemsBean.showUpload}){
					openDialog('uploadDialog');
				}
			});	
			var qrHtml = document.getElementById('qr'); 
			qrHtml.innerHTML = create_qrcode('{key:"#{SessionBean.user.apiKey}",col:"#{CollectionItemsBean.collection.id}"}');
		</script>
	</ui:define>
</ui:composition>
