<ui:composition template="templates/template_site.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
	<ui:param name="headline" value="Administration" />
	<ui:param name="currentMainMenu" value="admin"/>
	
	<ui:define name="mainContent">
	
		<!-- Breadcrumb - History -->
		<ui:include src="include/History.xhtml"></ui:include>	
		
		<!-- AdminDataList - Back Button -->
			<h:panelGroup layout="block" styleClass="imj_backPanel">
				<h:outputLink value="#{Navigation.adminUrl}">
					<h:outputText value="#{lbl.back_to_admin}" styleClass="imj_backButton"/>
				</h:outputLink>
			</h:panelGroup>		
		
		<!-- Are You Admin? -->	
		<h:panelGroup layout="block" styleClass="imj_pageMessageArea" rendered="#{!Auth.admin}">
			<h:outputText value="#{lbl.view_page_disallowed}" styleClass="imj_messageInfo" rendered="#{!Auth.loggedIn}"/>
			<h:outputText value="#{lbl.view_page_disallowed2}" styleClass="imj_messageInfo" rendered="#{Auth.loggedIn}"/>
		</h:panelGroup>
	
		<ui:fragment rendered="#{Auth.admin}">
		<!-- Only for Admins -->			
			
			<div class="imj_userConfig">
				
				<!-- Admin - TiledList -->		
				<div class="imj_administrationTiledList imj_maxWidth">
				
					<div class="imj_listBody">
					
						<h:panelGroup layout="block" styleClass="imj_adminPanel imj_userConfig" rendered="#{Auth.admin}">
								
							<h:outputText value="Important: This methods will affect your backend (database and storage): Make sure to make backup before running it!"/> <!-- internationalized info message lbl missing -->					
							<br/>
							<!-- Admin - Clean storage -->
							<div class="imj_headline">
								<h2>
									<h:outputText value="#{lbl.admin_clean_storage}"/>
								</h2>
							</div>
							
							<div class="imj_content">
								<h:outputText value="Remove files from the filesystem, which don't exists anymore in the database"/> <!-- internationalized info message lbl missing -->					
								<h:form>
									<h:panelGroup layout="block" styleClass="imj_adminEditPanel">
										<h:commandLink styleClass="imj_editButton" action="#{AdminBean.cleanStorage}" value="#{lbl.admin_clean_storage}: #{AdminBean.internalStorageLocation}"  onclick="openDialog('dialogWait');">
											<f:ajax/>
										</h:commandLink>
									</h:panelGroup>		
								</h:form>
							</div>
							
							<!-- Admin - Clean database -->
							<div class="imj_headline">
								<h2>
									<h:outputText value="#{lbl.admin_advanced_clean}"/>
								</h2>
							</div>
							<div class="imj_content">
								<h:outputText value="Check if some triples are not valid/used, and removed them, and give a report of the results."/> <!-- internationalized info message lbl missing -->		
								<h:form>
									<h:panelGroup layout="block" styleClass="imj_adminEditPanel">
										<h:commandLink action="#{AdminBean.status}" value="#{lbl.admin_advanced_state}" title="#{lbl.admin_advanced_state}" styleClass="imj_editButton"/>
									</h:panelGroup>
								</h:form>
								<h:outputText value="#{AdminBean.cleanDatabaseReport}" escape="false"/>
							</div>
							<div class="imj_content">
								<h:outputText value="Important: First check database. Remove the triples as found in the check database"/> <!-- internationalized info message lbl missing -->		
								<h:form>
									<h:panelGroup layout="block" styleClass="imj_adminEditPanel">
										<h:commandLink action="#{AdminBean.clean}" value="#{lbl.admin_advanced_clean}" title="#{lbl.admin_advanced_clean}" styleClass="imj_editButton">
											<f:ajax/>
										</h:commandLink>
									</h:panelGroup>
								</h:form>
							</div>
							
								<!-- Admin - Import -->
							<div class="imj_headline">
								<h2>
									<h:outputText value="Refresh File Size of all items"/>
								</h2>
							</div>
							
							<div class="imj_content">
								<h:outputText value="Refresh file size value of each item, wich actual value from storage (Useful after some manual operation on the storage)"/> <!-- internationalized info message lbl missing -->							
								<h:form>
									<h:panelGroup layout="block" styleClass="imj_adminEditPanel">
										<h:commandLink styleClass="imj_editButton" action="#{AdminBean.refreshFileSize}" value="Refresh (Operation runs asynchronously)"/>
									</h:panelGroup>	
								</h:form>
							</div>
							
							
							<!-- Admin - Import escidoc Pictures to imeji internal Storage -->
							<div class="imj_headline">
								<h2>
									<h:outputText value="#{lbl.import_to_internal}"/>
								</h2>
							</div>
							
							<div class="imj_content">
								<h:outputText value="Important: When the import is done (check in the log file), restart imeji with the correct storage!"/> <!-- internationalized info message lbl missing -->													
								<h:form>
									<h:panelGroup layout="block" styleClass="imj_adminEditPanel">
										<h:commandLink styleClass="imj_editButton" action="#{AdminBean.importToInternalStorage}" value="#{lbl.import_to_internal}: #{AdminBean.internalStorageLocation}"  onclick="openDialog('dialogWait');">
											<f:ajax/>
										</h:commandLink>
									</h:panelGroup>
								</h:form>
							</div>
							
						</h:panelGroup>
					
					</div> <!-- END LIST BODY -->	
				
				</div> <!-- END ADMIN LIST -->
			
			</div> <!-- END USER CONFIG -->
		
		
			
		
		</ui:fragment>
		
	</ui:define>
	
</ui:composition>