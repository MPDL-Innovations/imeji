<ui:composition template="templates/template_site.xhtml"  
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:menu="http://java.sun.com/jsf/composite/components/menu">
	
	<ui:param name="headline" value="#{lbl.admin_space_create}"/>
	<ui:param name="currentMainMenu" value="admin"/>
	
	<ui:define name="actionsMenu">
		<menu:context_actionMenu isUserLoggedIn="#{Auth.loggedIn}" 
								 curMainMenu="#{currentMainMenu}" 
								 downloadEnabled="false"
								 actionEnabled="false"
								 navBean="#{Navigation}"/>
	</ui:define>
	
	<ui:define name="mainContent">
		<!-- Breadcrumb - History -->
		<ui:include src="include/History.xhtml"></ui:include>
		
		<!-- Are You Admin? -->	
		<h:panelGroup layout="block" styleClass="imj_pageMessageArea" rendered="#{!Auth.admin}">
			<h:outputText value="#{lbl.view_page_disallowed}" styleClass="imj_messageInfo" rendered="#{!Auth.loggedIn}"/>
			<h:outputText value="#{lbl.view_page_disallowed2}" styleClass="imj_messageInfo" rendered="#{Auth.loggedIn}"/>
		</h:panelGroup>
		
		<div class="imj_spaceConfigPage">
			<h:form>
				<!-- title description logo slug -->
				<div class="imj_metadataSet">
					<label class="imj_metadataLabel">{#lbl.title} / #{lbl.name}</label>
					<input class="imj_metadataValue" id="spaceTitle" type="text"/>
				</div>
				<div class="imj_metadataSet">
					<label class="imj_metadataLabel">{#lbl.description}</label>
					<textarea class="imj_metadataValue"></textarea>
				</div>
				<div class="imj_metadataSet">
					<label class="imj_metadataLabel">{#lbl.logo}</label>
					<input class="imj_metadataValue" type="file"/>
				</div>
				<div class="imj_metadataSet">
					<label class="imj_metadataLabel">{#lbl.slug}</label>
					<span class="imj_metadataValue">
						<input id="spaceSlug" type="text"/>
						<span id="previewSpaceSlugUrl"></span>
					</span>
				</div>
			</h:form>
			<script type="text/javascript">
			/* <![CDATA[ */
				function clearToSlug(str) {
					str = str.replace(/ /g, "_");
					str = str.replace(/#/g, "_");
					str = str.replace(/ä/g, "ae");
					str = str.replace(/ö/g, "oe");
					str = str.replace(/ü/g, "ue");
					str = str.replace(/ß/g, "ss");
					return str;
				}
				function updateSlug() {
					$('#spaceTitle').keyup(function(evt){
						var slug = $(this).parents('form').find('#spaceSlug');
						var tmp = $(this).val();
						tmp = clearToSlug(tmp);
						slug.val(tmp);
						$('#previewSpaceSlugUrl').text('http://' + location.host + '/' + tmp + '/');
					});
					$('#spaceSlug').keyup(function(evt){
						var tmp = clearToSlug($(this).val());
						$(this).val(tmp);
						$('#previewSpaceSlugUrl').text(location.protocoll + '//' + location.host + '/' + tmp + '/');
					});
				}
				updateSlug();
			/*	]]> */
			</script>
		</div>
	</ui:define>
</ui:composition>