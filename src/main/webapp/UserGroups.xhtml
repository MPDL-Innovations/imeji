<ui:composition template="templates/template_site.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
	<ui:param name="headline" value="#{lbl.admin_userGroups_view}" />
	<ui:define name="mainContent">
		<!-- Breadcrumb - History -->
		<ui:include src="include/History.xhtml"></ui:include>
		
		<!-- Are You Admin? -->	
		<h:panelGroup layout="block" styleClass="imj_pageMessageArea" rendered="#{!Auth.admin}">
			<h:outputText value="#{lbl.view_page_disallowed}" styleClass="imj_messageInfo" rendered="#{SessionBean.user == null}"/>
			<h:outputText value="#{lbl.view_page_disallowed2}" styleClass="imj_messageInfo" rendered="#{Auth.loggedIn}"/>
		</h:panelGroup>
		
		<ui:fragment rendered="#{Auth.admin}">
			<div class="imj_userConfig">
		
				<!-- Admin - TiledList -->
				<div class="imj_administrationTiledList imj_maxWidth">
					<div class="imj_listHeader">
						<div class="imj_headline">
							<h2>
								<h:outputText value="#{lbl.admin_userGroups_view}"/>
							</h2>
						</div>
					</div>
					<div class="imj_listBody">
						<h:form id="new">
							<h:inputText value="#{UserGroups.query}" styleClass="imj_simpleSearchInput" />
							<h:commandButton action="#{UserGroups.search()}" value="#{lbl.search}" styleClass="imj_simpleSearchButtonSubmit" />
						</h:form>
						<h:outputLink value="#{Navigation.applicationUrl}usergroups" title="#{lbl.clear}" rendered="#{UserGroups.query != ''}" styleClass="imj_cancelButton">
							<h:outputText value="#{lbl.clear}" />
						</h:outputLink>
					</div>
					<div class="imj_listBody">
						<ui:repeat var="group" value="#{UserGroups.userGroups}">
							<div class="imj_adminPanel imj_userConfig">
								<!-- AdminDataList - Users List - Name -->
								<div class="imj_admindataSet">									
									<div class="imj_headline">
										<h2>
											<h:outputText value="#{group.name}"/>
										</h2>
										<span class="imj_invisible">: </span>
									</div>
									<div class="imj_content">
										<!-- AdminDataList - User Grants -->									
										<div class="imj_admindataValue">										
											<div class="imj_admindataValueEntry">
												<ui:repeat id="grantList" var="grant" value="#{group.grants}" rows="0">
													<span class="imj_userGrantList">
														<h:outputText styleClass="" value="#{grant.asGrantType()}" />
														<h:outputLink styleClass="" value="#{grant.grantFor}">
															<h:outputText value="#{grant.grantFor}" />
														</h:outputLink>
													</span>
												</ui:repeat>
											</div>
										</div>
										<div class="imj_adminEditPanel">
											<h:outputLink value="#{Navigation.applicationUrl}usergroup?id=#{group.id}" styleClass="imj_editButton">
												<h:outputText value="#{lbl.edit}"/>
											</h:outputLink>
											<h:form>
												<h:commandLink styleClass="imj_cancelButton" value="#{lbl.delete}" action="#{UserGroups.remove(group)}"/>
											</h:form>
										</div>
									</div>
								</div>
							</div>
						</ui:repeat>
					</div>
				</div>
			</div>
		</ui:fragment>
	</ui:define>
</ui:composition>






